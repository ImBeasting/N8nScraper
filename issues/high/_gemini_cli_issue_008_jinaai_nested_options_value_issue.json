{
  "issue_id": "_gemini_cli_issue_008",
  "title": "JinaAI node: Nested 'Output Format' property has incorrect 'value' field and missing 'value' in 'JSON' option",
  "severity": "high",
  "status": "new",
  "priority": 2,
  "metadata": {
    "created_at": "2025-11-13T17:50:00Z",
    "created_by": "gemini_cli",
    "affected_nodes": "JinaAI (potentially other nodes with nested 'options' properties)",
    "validation_session": "comprehensive_audit_2025-11-13"
  },
  "description": {
    "problem": "The nested 'Output Format' property within the 'options' collection for the 'reader/read' operation in JinaAI has two issues: 1. It incorrectly includes a top-level 'value: \"html\"' field. 2. The 'JSON' option within its 'options' array is missing its 'value' field.",
    "impact": "HIGH - Misrepresentation of property structure and loss of functionality. The incorrect top-level 'value' field can lead to parsing errors or misinterpretation of the property. The missing 'value' for the 'JSON' option makes that specific option unusable.",
    "root_cause": "The extractor's logic for parsing nested 'options' properties within collections seems to be flawed. It might be incorrectly assigning a 'value' from the first option to the parent property and failing to extract all 'value' fields for subsequent options.",
    "evidence": [
      "Source file: n8n/packages/nodes-base/nodes/JinaAI/JinaAi.node.ts",
      "Source snippet (Output Format property): { displayName: 'Output Format', name: 'outputFormat', description: 'Specify desired output format', type: 'options', options: [ { name: 'HTML', value: 'html' }, { name: 'JSON', value: '' }, ... ], default: '' }",
      "Extracted file: extracted_docs/jinaai_data.json",
      "Extracted 'Output Format' property shows: { ..., \"value\": \"html\", ... } (incorrect top-level value)",
      "Extracted 'Output Format' options array shows: { \"name\": \"JSON\", \"displayName\": \"Json\" } (missing 'value' field)",
      "Command used to verify: jq '.properties[] | select(.name == \"options\" and .displayOptions.show.resource[] == \"reader\" and .displayOptions.show.operation[] == \"read\") | .options[]?' extracted_docs/jinaai_data.json and manual comparison with source."
    ],
    "fix_approach": "1. Review and correct the extraction logic for nested 'options' properties within collections. \n2. Ensure that 'value' fields are only extracted within the 'options' array for each option, not at the parent property level. \n3. Ensure all 'value' fields within the 'options' array are correctly extracted, even if they are empty strings. \n4. Test with: JinaAI node. \n5. Expected result: The 'Output Format' property should not have a top-level 'value' field, and the 'JSON' option should have '\"value\": \"\".'"
  },
  "ownership": {
    "assigned_to": null,
    "locked_by": null,
    "lock_acquired_at": null,
    "lock_expires_at": null,
    "claimed_at": null
  }
}