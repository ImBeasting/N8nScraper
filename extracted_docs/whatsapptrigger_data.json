{
  "node_info": {
    "icon": "file:whatsapp.svg",
    "defaults": {
      "name": "WhatsApp Trigger"
    },
    "inputs": [],
    "outputs": [
      "Main"
    ],
    "group": [
      "trigger"
    ],
    "authentication": [
      {
        "name": "whatsAppTriggerApi",
        "required": true
      }
    ],
    "loadOptionsMethods": [],
    "eventTriggerDescription": "",
    "activationMessage": "",
    "triggerPanel": {},
    "supportsCORS": false,
    "displayName": "WhatsApp Trigger",
    "name": "whatsAppTrigger",
    "description": "Handle WhatsApp events via webhooks",
    "subtitle": "={{$parameter[\"event\"]}}",
    "version": "1",
    "node_type": "trigger",
    "webhooks": [
      {
        "name": "setup",
        "httpMethod": "GET",
        "responseMode": "onReceived",
        "path": "webhook"
      },
      {
        "name": "default",
        "httpMethod": "POST",
        "responseMode": "onReceived",
        "path": "webhook"
      }
    ]
  },
  "metadata": {
    "node": "n8n-nodes-base.whatsAppTrigger",
    "nodeVersion": "1.0",
    "codexVersion": "1.0",
    "categories": [
      "Communication"
    ],
    "resources": {
      "credentialDocumentation": [
        {
          "url": "https://docs.n8n.io/integrations/builtin/credentials/whatsapp/"
        }
      ],
      "primaryDocumentation": [
        {
          "url": "https://docs.n8n.io/integrations/builtin/trigger-nodes/n8n-nodes-base.whatsapptrigger/"
        }
      ]
    }
  },
  "properties": [
    {
      "displayName": "Due to Facebook API limitations, you can use just one WhatsApp trigger for each Facebook App",
      "name": "whatsAppNotice",
      "type": "notice",
      "default": ""
    },
    {
      "displayName": "Trigger On",
      "name": "updates",
      "type": "multiOptions",
      "value": "account_review_update",
      "default": [],
      "required": true,
      "options": [
        {
          "name": "Account Review Update",
          "value": "account_review_update",
          "displayName": "Account Review Update"
        },
        {
          "name": "Account Update",
          "value": "account_update",
          "displayName": "Account Update"
        },
        {
          "name": "Business Capability Update",
          "value": "business_capability_update",
          "displayName": "Business Capability Update"
        },
        {
          "name": "Message Template Quality Update",
          "value": "message_template_quality_update",
          "displayName": "Message Template Quality Update"
        },
        {
          "name": "Message Template Status Update",
          "value": "message_template_status_update",
          "displayName": "Message Template Status Update"
        },
        {
          "name": "Messages",
          "value": "messages",
          "displayName": "Messages"
        },
        {
          "name": "Phone Number Name Update",
          "value": "phone_number_name_update",
          "displayName": "Phone Number Name Update"
        },
        {
          "name": "Phone Number Quality Update",
          "value": "phone_number_quality_update",
          "displayName": "Phone Number Quality Update"
        },
        {
          "name": "Security",
          "value": "security",
          "displayName": "Security"
        },
        {
          "name": "Template Category Update",
          "value": "template_category_update",
          "displayName": "Template Category Update"
        }
      ]
    },
    {
      "displayName": "Options",
      "name": "options",
      "type": "collection",
      "description": "WhatsApp sends notifications to the Trigger when the status of a message changes (for example from Sent to Delivered and from Delivered to Read). To avoid multiple executions for one WhatsApp message, you can set the Trigger to execute only on selected message status updates.",
      "placeholder": "Add option",
      "value": "all",
      "default": {},
      "options": [
        {
          "displayName": "Receive Message Status Updates",
          "name": "messageStatusUpdates",
          "type": "multiOptions",
          "description": "WhatsApp sends notifications to the Trigger when the status of a message changes (for example from Sent to Delivered and from Delivered to Read). To avoid multiple executions for one WhatsApp message, you can set the Trigger to execute only on selected message status updates.",
          "value": "all",
          "options": [
            {
              "name": "All",
              "value": "all",
              "displayName": "All"
            },
            {
              "name": "Deleted",
              "value": "deleted",
              "displayName": "Deleted"
            },
            {
              "name": "Delivered",
              "value": "delivered",
              "displayName": "Delivered"
            },
            {
              "name": "Failed",
              "value": "failed",
              "displayName": "Failed"
            },
            {
              "name": "Read",
              "value": "read",
              "displayName": "Read"
            },
            {
              "name": "Sent",
              "value": "sent",
              "displayName": "Sent"
            }
          ]
        }
      ]
    }
  ],
  "operations": [],
  "operations_by_resource": {},
  "credentials": [
    {
      "name": "whatsAppTriggerApi",
      "required": true
    }
  ],
  "workflow_examples": [],
  "expressions": [
    "={{$parameter[\"event\"]}}"
  ],
  "validation_rules": {
    "updates": {
      "required": true
    }
  },
  "type_info": {
    "whatsAppNotice": {
      "type": "notice",
      "displayName": "Due to Facebook API limitations, you can use just one WhatsApp trigger for each Facebook App",
      "name": "whatsAppNotice"
    },
    "updates": {
      "type": "multiOptions",
      "displayName": "Trigger On",
      "name": "updates",
      "possibleValues": [
        {
          "value": "account_review_update",
          "name": "Account Review Update",
          "description": ""
        },
        {
          "value": "account_update",
          "name": "Account Update",
          "description": ""
        },
        {
          "value": "business_capability_update",
          "name": "Business Capability Update",
          "description": ""
        },
        {
          "value": "message_template_quality_update",
          "name": "Message Template Quality Update",
          "description": ""
        },
        {
          "value": "message_template_status_update",
          "name": "Message Template Status Update",
          "description": ""
        },
        {
          "value": "messages",
          "name": "Messages",
          "description": ""
        },
        {
          "value": "phone_number_name_update",
          "name": "Phone Number Name Update",
          "description": ""
        },
        {
          "value": "phone_number_quality_update",
          "name": "Phone Number Quality Update",
          "description": ""
        },
        {
          "value": "security",
          "name": "Security",
          "description": ""
        },
        {
          "value": "template_category_update",
          "name": "Template Category Update",
          "description": ""
        }
      ]
    },
    "options": {
      "type": "collection",
      "displayName": "Options",
      "name": "options",
      "subProperties": [
        {
          "displayName": "Receive Message Status Updates",
          "name": "messageStatusUpdates",
          "type": "multiOptions",
          "description": "WhatsApp sends notifications to the Trigger when the status of a message changes (for example from Sent to Delivered and from Delivered to Read). To avoid multiple executions for one WhatsApp message, you can set the Trigger to execute only on selected message status updates.",
          "value": "all",
          "options": [
            {
              "name": "All",
              "value": "all",
              "displayName": "All"
            },
            {
              "name": "Deleted",
              "value": "deleted",
              "displayName": "Deleted"
            },
            {
              "name": "Delivered",
              "value": "delivered",
              "displayName": "Delivered"
            },
            {
              "name": "Failed",
              "value": "failed",
              "displayName": "Failed"
            },
            {
              "name": "Read",
              "value": "read",
              "displayName": "Read"
            },
            {
              "name": "Sent",
              "value": "sent",
              "displayName": "Sent"
            }
          ]
        }
      ]
    }
  },
  "api_patterns": {
    "http_methods": [
      "POST"
    ],
    "endpoints": [
      "https://graph.facebook.com/v19.0/oauth/access_token",
      "https://graph.facebook.com/v19.0{resource}",
      "{phoneNumberId}/messages"
    ],
    "headers": [
      "content-type"
    ],
    "query_params": []
  },
  "ui_elements": {
    "notices": [
      {
        "name": "whatsAppNotice",
        "text": "Due to Facebook API limitations, you can use just one WhatsApp trigger for each Facebook App",
        "conditions": null
      }
    ],
    "tooltips": [],
    "placeholders": [
      {
        "field": "options",
        "text": "Add option"
      }
    ],
    "hints": []
  },
  "settings": {
    "common": {
      "notes": {
        "name": "Notes",
        "field_id": "notes",
        "type": "string",
        "default": "",
        "description": "Optional note to save with the node"
      },
      "notesInFlow": {
        "name": "Display Note in Flow?",
        "field_id": "notesInFlow",
        "type": "boolean",
        "default": false,
        "description": "If active, the note above will display in the flow as a subtitle"
      }
    },
    "note": "Trigger nodes only have common settings (notes, notesInFlow)"
  }
}