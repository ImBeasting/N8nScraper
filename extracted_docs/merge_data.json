{
  "node_info": {
    "icon": "file:merge.svg",
    "defaults": {
      "name": "Merge"
    },
    "inputs": [
      "Main",
      "Main"
    ],
    "outputs": [
      "Main"
    ],
    "group": [
      "transform"
    ],
    "authentication": [],
    "loadOptionsMethods": [],
    "eventTriggerDescription": "",
    "activationMessage": "",
    "triggerPanel": {},
    "supportsCORS": false,
    "displayName": "Merge",
    "subtitle": "={{$parameter[",
    "description": "Merges data of multiple streams once data from both is available",
    "name": "Merge",
    "version": [
      "2",
      "2.1"
    ],
    "node_type": "regular"
  },
  "metadata": {},
  "properties": [
    {
      "displayName": "Mode",
      "name": "mode",
      "type": "options",
      "description": "All items of input 1, then all items of input 2",
      "value": "append",
      "default": "append",
      "options": [
        {
          "name": "Append",
          "description": "All items of input 1, then all items of input 2",
          "value": "append",
          "displayName": "Append"
        },
        {
          "name": "Combine",
          "description": "Merge matching items together",
          "value": "combine",
          "displayName": "Combine"
        },
        {
          "name": "Choose Branch",
          "description": "Output input data, without modifying it",
          "value": "chooseBranch",
          "displayName": "Choose Branch"
        }
      ]
    },
    {
      "displayName": "Combination Mode",
      "name": "combinationMode",
      "type": "options",
      "description": "Combine items with the same field values",
      "value": "mergeByFields",
      "default": "mergeByFields",
      "options": [
        {
          "name": "Merge By Fields",
          "description": "Combine items with the same field values",
          "value": "mergeByFields",
          "displayName": "Merge By Fields"
        },
        {
          "name": "Merge By Position",
          "description": "Combine items based on their order",
          "value": "mergeByPosition",
          "displayName": "Merge By Position"
        },
        {
          "name": "Multiplex",
          "description": "All possible item combinations (cross join)",
          "value": "multiplex",
          "displayName": "Multiplex"
        }
      ],
      "displayOptions": {
        "show": {
          "mode": [
            "combine"
          ]
        }
      }
    },
    {
      "displayName": "Fields to Match",
      "name": "mergeByFields",
      "type": "fixedCollection",
      "placeholder": "Add Fields to Match",
      "hint": "Enter the field name as text",
      "default": "",
      "options": [
        {
          "name": "values",
          "displayName": "Values",
          "values": [
            {
              "displayName": "Input 1 Field",
              "name": "field1",
              "type": "string",
              "placeholder": "e.g. id",
              "hint": "Enter the field name as text",
              "default": ""
            },
            {
              "displayName": "Input 2 Field",
              "name": "field2",
              "type": "string",
              "placeholder": "e.g. id",
              "hint": "Enter the field name as text",
              "default": ""
            }
          ]
        }
      ],
      "typeOptions": {
        "multipleValues": true
      },
      "displayOptions": {
        "show": {
          "mode": [
            "combine"
          ],
          "combinationMode": [
            "mergeByFields"
          ]
        }
      }
    },
    {
      "displayName": "Output Type",
      "name": "joinMode",
      "type": "options",
      "description": "Items that match, merged together (inner join)",
      "value": "keepMatches",
      "default": "keepMatches",
      "options": [
        {
          "name": "Keep Matches",
          "description": "Items that match, merged together (inner join)",
          "value": "keepMatches",
          "displayName": "Keep Matches"
        },
        {
          "name": "Keep Non-Matches",
          "description": "Items that don't match",
          "value": "keepNonMatches",
          "displayName": "Keep Non-matches"
        },
        {
          "name": "Keep Everything",
          "description": "Items that match merged together, plus items that don't match (outer join)",
          "value": "keepEverything",
          "displayName": "Keep Everything"
        },
        {
          "name": "Enrich Input 1",
          "description": "All of input 1, with data from input 2 added in (left join)",
          "value": "enrichInput1",
          "displayName": "Enrich Input 1"
        },
        {
          "name": "Enrich Input 2",
          "description": "All of input 2, with data from input 1 added in (right join)",
          "value": "enrichInput2",
          "displayName": "Enrich Input 2"
        }
      ],
      "displayOptions": {
        "show": {
          "mode": [
            "combine"
          ],
          "combinationMode": [
            "mergeByFields"
          ]
        }
      }
    },
    {
      "displayName": "Output Data From",
      "name": "outputDataFrom",
      "type": "options",
      "value": "both",
      "default": "both",
      "options": [
        {
          "name": "Both Inputs Merged Together",
          "value": "both",
          "displayName": "Both Inputs Merged Together"
        },
        {
          "name": "Input 1",
          "value": "input1",
          "displayName": "Input 1"
        },
        {
          "name": "Input 2",
          "value": "input2",
          "displayName": "Input 2"
        }
      ],
      "displayOptions": {
        "show": {
          "mode": [
            "combine"
          ],
          "combinationMode": [
            "mergeByFields"
          ],
          "joinMode": [
            "keepMatches"
          ]
        }
      }
    },
    {
      "displayName": "Output Data From",
      "name": "outputDataFrom",
      "type": "options",
      "value": "both",
      "default": "both",
      "options": [
        {
          "name": "Both Inputs Appended Together",
          "value": "both",
          "displayName": "Both Inputs Appended Together"
        },
        {
          "name": "Input 1",
          "value": "input1",
          "displayName": "Input 1"
        },
        {
          "name": "Input 2",
          "value": "input2",
          "displayName": "Input 2"
        }
      ],
      "displayOptions": {
        "show": {
          "mode": [
            "combine"
          ],
          "combinationMode": [
            "mergeByFields"
          ],
          "joinMode": [
            "keepNonMatches"
          ]
        }
      }
    },
    {
      "displayName": "Output Type",
      "name": "chooseBranchMode",
      "type": "options",
      "value": "waitForBoth",
      "default": "waitForBoth",
      "options": [
        {
          "name": "Wait for Both Inputs to Arrive",
          "value": "waitForBoth",
          "displayName": "Wait For Both Inputs To Arrive"
        }
      ],
      "displayOptions": {
        "show": {
          "mode": [
            "chooseBranch"
          ]
        }
      }
    },
    {
      "displayName": "Output",
      "name": "output",
      "type": "options",
      "value": "input1",
      "default": "input1",
      "options": [
        {
          "name": "Input 1 Data",
          "value": "input1",
          "displayName": "Input 1 Data"
        },
        {
          "name": "Input 2 Data",
          "value": "input2",
          "displayName": "Input 2 Data"
        },
        {
          "name": "A Single, Empty Item",
          "value": "empty",
          "displayName": "A Single, Empty Item"
        }
      ],
      "displayOptions": {
        "show": {
          "mode": [
            "chooseBranch"
          ],
          "chooseBranchMode": [
            "waitForBoth"
          ]
        }
      }
    },
    {
      "displayName": "Options",
      "name": "options",
      "type": "collection",
      "description": "Whether to disallow referencing child fields using `parent.child` in the field name",
      "placeholder": "Add option",
      "value": "all",
      "default": {},
      "options": [
        {
          "displayName": "Disable Dot Notation",
          "name": "disableDotNotation",
          "type": "boolean",
          "description": "Whether to disallow referencing child fields using `parent.child` in the field name",
          "default": false,
          "displayOptions": {
            "show": {}
          }
        },
        {
          "displayName": "Fuzzy Compare",
          "name": "fuzzyCompare",
          "type": "boolean",
          "description": "Whether to tolerate small type differences when comparing fields. E.g. the number 3 and the string '3' are treated as the same.",
          "default": false
        },
        {
          "displayName": "Include Any Unpaired Items",
          "name": "includeUnpaired",
          "type": "boolean",
          "description": "If there are different numbers of items in input 1 and input 2, whether to include the ones at the end with nothing to pair with",
          "default": false,
          "displayOptions": {
            "show": {}
          }
        },
        {
          "displayName": "Multiple Matches",
          "name": "multipleMatches",
          "type": "options",
          "description": "Output multiple items if there are multiple matches",
          "value": "all",
          "default": "all",
          "options": [
            {
              "name": "Include All Matches",
              "description": "Output multiple items if there are multiple matches",
              "value": "all",
              "displayName": "Include All Matches"
            },
            {
              "name": "Include First Match Only",
              "description": "Only ever output a single item per match",
              "value": "first",
              "displayName": "Include First Match Only"
            }
          ],
          "displayOptions": {
            "show": {}
          }
        },
        {
          "displayName": "Multiple Matches",
          "name": "multipleMatches",
          "type": "options",
          "description": "Output multiple items if there are multiple matches",
          "value": "all",
          "default": "all",
          "options": [
            {
              "name": "Include All Matches",
              "description": "Output multiple items if there are multiple matches",
              "value": "all",
              "displayName": "Include All Matches"
            },
            {
              "name": "Include First Match Only",
              "description": "Only ever output a single item per match",
              "value": "first",
              "displayName": "Include First Match Only"
            }
          ],
          "displayOptions": {
            "show": {}
          }
        }
      ],
      "displayOptions": {
        "show": {},
        "hide": {}
      },
      "_source": "descriptions_optionsDescription"
    }
  ],
  "operations": [],
  "operations_by_resource": {},
  "credentials": [],
  "workflow_examples": [],
  "expressions": [
    "={{ $parameter[\"mode\"] === \"chooseBranch\" ? [0, 1] : 1 }}"
  ],
  "validation_rules": {
    "combinationMode": {
      "displayOptions": {
        "show": {
          "mode": [
            "combine"
          ]
        }
      }
    },
    "mergeByFields": {
      "displayOptions": {
        "show": {
          "mode": [
            "combine"
          ],
          "combinationMode": [
            "mergeByFields"
          ]
        }
      }
    },
    "joinMode": {
      "displayOptions": {
        "show": {
          "mode": [
            "combine"
          ],
          "combinationMode": [
            "mergeByFields"
          ]
        }
      }
    },
    "outputDataFrom": {
      "displayOptions": {
        "show": {
          "mode": [
            "combine"
          ],
          "combinationMode": [
            "mergeByFields"
          ],
          "joinMode": [
            "keepNonMatches"
          ]
        }
      }
    },
    "chooseBranchMode": {
      "displayOptions": {
        "show": {
          "mode": [
            "chooseBranch"
          ]
        }
      }
    },
    "output": {
      "displayOptions": {
        "show": {
          "mode": [
            "chooseBranch"
          ],
          "chooseBranchMode": [
            "waitForBoth"
          ]
        }
      }
    },
    "options": {
      "displayOptions": {
        "show": {},
        "hide": {}
      }
    }
  },
  "type_info": {
    "mode": {
      "type": "options",
      "displayName": "Mode",
      "name": "mode",
      "possibleValues": [
        {
          "value": "append",
          "name": "Append",
          "description": "All items of input 1, then all items of input 2"
        },
        {
          "value": "combine",
          "name": "Combine",
          "description": "Merge matching items together"
        },
        {
          "value": "chooseBranch",
          "name": "Choose Branch",
          "description": "Output input data, without modifying it"
        }
      ]
    },
    "combinationMode": {
      "type": "options",
      "displayName": "Combination Mode",
      "name": "combinationMode",
      "possibleValues": [
        {
          "value": "mergeByFields",
          "name": "Merge By Fields",
          "description": "Combine items with the same field values"
        },
        {
          "value": "mergeByPosition",
          "name": "Merge By Position",
          "description": "Combine items based on their order"
        },
        {
          "value": "multiplex",
          "name": "Multiplex",
          "description": "All possible item combinations (cross join)"
        }
      ]
    },
    "mergeByFields": {
      "type": "fixedCollection",
      "displayName": "Fields to Match",
      "name": "mergeByFields",
      "typeOptions": {
        "multipleValues": true
      },
      "subProperties": [
        {
          "name": "values",
          "displayName": "Values",
          "values": [
            {
              "displayName": "Input 1 Field",
              "name": "field1",
              "type": "string",
              "placeholder": "e.g. id",
              "hint": "Enter the field name as text",
              "default": ""
            },
            {
              "displayName": "Input 2 Field",
              "name": "field2",
              "type": "string",
              "placeholder": "e.g. id",
              "hint": "Enter the field name as text",
              "default": ""
            }
          ]
        }
      ]
    },
    "joinMode": {
      "type": "options",
      "displayName": "Output Type",
      "name": "joinMode",
      "possibleValues": [
        {
          "value": "keepMatches",
          "name": "Keep Matches",
          "description": "Items that match, merged together (inner join)"
        },
        {
          "value": "keepNonMatches",
          "name": "Keep Non-Matches",
          "description": "Items that don't match"
        },
        {
          "value": "keepEverything",
          "name": "Keep Everything",
          "description": "Items that match merged together, plus items that don't match (outer join)"
        },
        {
          "value": "enrichInput1",
          "name": "Enrich Input 1",
          "description": "All of input 1, with data from input 2 added in (left join)"
        },
        {
          "value": "enrichInput2",
          "name": "Enrich Input 2",
          "description": "All of input 2, with data from input 1 added in (right join)"
        }
      ]
    },
    "outputDataFrom": {
      "type": "options",
      "displayName": "Output Data From",
      "name": "outputDataFrom",
      "possibleValues": [
        {
          "value": "both",
          "name": "Both Inputs Appended Together",
          "description": ""
        },
        {
          "value": "input1",
          "name": "Input 1",
          "description": ""
        },
        {
          "value": "input2",
          "name": "Input 2",
          "description": ""
        }
      ]
    },
    "chooseBranchMode": {
      "type": "options",
      "displayName": "Output Type",
      "name": "chooseBranchMode",
      "possibleValues": [
        {
          "value": "waitForBoth",
          "name": "Wait for Both Inputs to Arrive",
          "description": ""
        }
      ]
    },
    "output": {
      "type": "options",
      "displayName": "Output",
      "name": "output",
      "possibleValues": [
        {
          "value": "input1",
          "name": "Input 1 Data",
          "description": ""
        },
        {
          "value": "input2",
          "name": "Input 2 Data",
          "description": ""
        },
        {
          "value": "empty",
          "name": "A Single, Empty Item",
          "description": ""
        }
      ]
    },
    "options": {
      "type": "collection",
      "displayName": "Options",
      "name": "options",
      "subProperties": [
        {
          "displayName": "Disable Dot Notation",
          "name": "disableDotNotation",
          "type": "boolean",
          "description": "Whether to disallow referencing child fields using `parent.child` in the field name",
          "default": false,
          "displayOptions": {
            "show": {}
          }
        },
        {
          "displayName": "Fuzzy Compare",
          "name": "fuzzyCompare",
          "type": "boolean",
          "description": "Whether to tolerate small type differences when comparing fields. E.g. the number 3 and the string '3' are treated as the same.",
          "default": false
        },
        {
          "displayName": "Include Any Unpaired Items",
          "name": "includeUnpaired",
          "type": "boolean",
          "description": "If there are different numbers of items in input 1 and input 2, whether to include the ones at the end with nothing to pair with",
          "default": false,
          "displayOptions": {
            "show": {}
          }
        },
        {
          "displayName": "Multiple Matches",
          "name": "multipleMatches",
          "type": "options",
          "description": "Output multiple items if there are multiple matches",
          "value": "all",
          "default": "all",
          "options": [
            {
              "name": "Include All Matches",
              "description": "Output multiple items if there are multiple matches",
              "value": "all",
              "displayName": "Include All Matches"
            },
            {
              "name": "Include First Match Only",
              "description": "Only ever output a single item per match",
              "value": "first",
              "displayName": "Include First Match Only"
            }
          ],
          "displayOptions": {
            "show": {}
          }
        },
        {
          "displayName": "Multiple Matches",
          "name": "multipleMatches",
          "type": "options",
          "description": "Output multiple items if there are multiple matches",
          "value": "all",
          "default": "all",
          "options": [
            {
              "name": "Include All Matches",
              "description": "Output multiple items if there are multiple matches",
              "value": "all",
              "displayName": "Include All Matches"
            },
            {
              "name": "Include First Match Only",
              "description": "Only ever output a single item per match",
              "value": "first",
              "displayName": "Include First Match Only"
            }
          ],
          "displayOptions": {
            "show": {}
          }
        }
      ]
    }
  },
  "api_patterns": {},
  "ui_elements": {
    "notices": [],
    "tooltips": [],
    "placeholders": [
      {
        "field": "mergeByFields",
        "text": "Add Fields to Match"
      },
      {
        "field": "options",
        "text": "Add option"
      }
    ],
    "hints": [
      {
        "field": "mergeByFields",
        "text": "Enter the field name as text"
      }
    ]
  },
  "settings": {
    "common": {
      "notes": {
        "name": "Notes",
        "field_id": "notes",
        "type": "string",
        "default": "",
        "description": "Optional note to save with the node"
      },
      "notesInFlow": {
        "name": "Display Note in Flow?",
        "field_id": "notesInFlow",
        "type": "boolean",
        "default": false,
        "description": "If active, the note above will display in the flow as a subtitle"
      }
    },
    "executable": {
      "alwaysOutputData": {
        "name": "Always Output Data",
        "field_id": "alwaysOutputData",
        "type": "boolean",
        "default": false,
        "description": "If active, will output a single, empty item when the output would have been empty. Use to prevent the workflow finishing on this node"
      },
      "executeOnce": {
        "name": "Execute Once",
        "field_id": "executeOnce",
        "type": "boolean",
        "default": false,
        "description": "If active, the node executes only once, with data from the first item it receives"
      },
      "retryOnFail": {
        "name": "Retry On Fail",
        "field_id": "retryOnFail",
        "type": "boolean",
        "default": false,
        "description": "If active, the node tries to execute again when it fails"
      },
      "maxTries": {
        "name": "Max. Tries",
        "field_id": "maxTries",
        "type": "number",
        "default": 3,
        "min": 2,
        "max": 5,
        "description": "Number of times to attempt to execute the node before failing the execution",
        "displayOptions": {
          "show": {
            "retryOnFail": [
              true
            ]
          }
        }
      },
      "waitBetweenTries": {
        "name": "Wait Between Tries (ms)",
        "field_id": "waitBetweenTries",
        "type": "number",
        "default": 1000,
        "min": 0,
        "max": 5000,
        "description": "How long to wait between each attempt (in milliseconds)",
        "displayOptions": {
          "show": {
            "retryOnFail": [
              true
            ]
          }
        }
      },
      "onError": {
        "name": "On Error",
        "field_id": "onError",
        "type": "options",
        "default": "stopWorkflow",
        "description": "Action to take when the node execution fails",
        "options": [
          {
            "name": "Stop Workflow",
            "value": "stopWorkflow",
            "description": "Halt execution and fail workflow"
          },
          {
            "name": "Continue",
            "value": "continueRegularOutput",
            "description": "Pass error message as item in regular output"
          },
          {
            "name": "Continue (using error output)",
            "value": "continueErrorOutput",
            "description": "Pass item to an extra `error` output"
          }
        ]
      }
    },
    "note": "Executable nodes have both common and executable settings"
  }
}